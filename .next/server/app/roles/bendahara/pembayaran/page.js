(()=>{var a={};a.id=396,a.ids=[396],a.modules={7849:a=>{"use strict";a.exports=require("next/dist/client/components/action-async-storage.external")},2934:a=>{"use strict";a.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:a=>{"use strict";a.exports=require("next/dist/client/components/request-async-storage.external")},4580:a=>{"use strict";a.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:a=>{"use strict";a.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:a=>{"use strict";a.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:a=>{"use strict";a.exports=require("assert")},2361:a=>{"use strict";a.exports=require("events")},7147:a=>{"use strict";a.exports=require("fs")},3685:a=>{"use strict";a.exports=require("http")},5687:a=>{"use strict";a.exports=require("https")},2037:a=>{"use strict";a.exports=require("os")},1017:a=>{"use strict";a.exports=require("path")},2781:a=>{"use strict";a.exports=require("stream")},6224:a=>{"use strict";a.exports=require("tty")},7310:a=>{"use strict";a.exports=require("url")},3837:a=>{"use strict";a.exports=require("util")},9796:a=>{"use strict";a.exports=require("zlib")},7712:(a,e,t)=>{"use strict";t.r(e),t.d(e,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>c,pages:()=>u,routeModule:()=>m,tree:()=>o});var r=t(482),s=t(9108),n=t(2563),i=t.n(n),l=t(8300),d={};for(let a in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(a)&&(d[a]=()=>l[a]);t.d(e,d);let o=["",{children:["roles",{children:["bendahara",{children:["pembayaran",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8453)),"/media/smarthagar/Assets/Project/NextJS/TA/bill/src/app/roles/bendahara/pembayaran/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,7562)),"/media/smarthagar/Assets/Project/NextJS/TA/bill/src/app/roles/bendahara/pembayaran/layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1307)),"/media/smarthagar/Assets/Project/NextJS/TA/bill/src/app/roles/layout.tsx"],metadata:{icon:[async a=>(await Promise.resolve().then(t.bind(t,3881))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,1342)),"/media/smarthagar/Assets/Project/NextJS/TA/bill/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async a=>(await Promise.resolve().then(t.bind(t,3881))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/media/smarthagar/Assets/Project/NextJS/TA/bill/src/app/roles/bendahara/pembayaran/page.tsx"],c="/roles/bendahara/pembayaran/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/roles/bendahara/pembayaran/page",pathname:"/roles/bendahara/pembayaran",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8899:(a,e,t)=>{Promise.resolve().then(t.bind(t,5692))},5692:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>q});var r=t(5344),s=t(3729),n=t(673),i=t(8325),l=t(6141),d=t(4762),o=t(87);let u=a=>a?.map(a=>({src:`${o._n}/${a?.bukti_bayar}`,title:a.tgl_bayar,description:a.status_bayar,width:3840,height:5760}));var c=t(7160);let p=({setDelete:a,setEdit:e,search:t,setTambah:o})=>{let{setPembayaran:p,dtPembayaran:m}=(0,d.Z)(),[b,h]=(0,s.useState)(1),[y,x]=(0,s.useState)(10),[g,_]=(0,s.useState)(!0),j=(0,s.useCallback)(async()=>{_(!0),await p({page:b,limit:y,search:t,status_bayar:"proses,tolak,terima"}),_(!1)},[p,b,y,t]);(0,s.useEffect)(()=>{h(1),j()},[t,j]),(0,s.useEffect)(()=>(j(),()=>{}),[b,y,j]);let[P,f]=(0,s.useState)(),[v,w]=(0,s.useState)(-1);return(0,s.useEffect)(()=>{f(u(m.data))},[m.data]),(0,r.jsxs)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:[r.jsx(c.Z,{index:v,setIndex:w,slides:P}),g?r.jsx(n.Z,{}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"",children:r.jsx(l.Z,{headTable:["No","Tgl. Angsuran","Status","Bukti Pembayaran"],tableBodies:["tgl_bayar","status_bayar","bukti_bayar"],dataTable:m.data,page:b,limit:y,setEdit:e,setDelete:a,ubah:!0,hapus:!1})}),m?.last_page>1&&r.jsx("div",{className:"mt-4",children:r.jsx(i.Z,{currentPage:m?.current_page,totalPages:m?.last_page,setPage:h})})]})]})};var m=t(5032),b=t(8233),h=t(5518),y=t(708),x=t(3390);t(2094);let g=({register:a,errors:e,control:t,dtEdit:s,watch:n,setValue:i,showModal:l,myFile:d,setMyFile:o})=>r.jsx(r.Fragment,{children:r.jsx(x.u,{label:"Status_bayar",defaultOption:"Status Bayar",register:a,name:"status_bayar",options:[{value:"proses",label:"Proses"},{value:"tolak",label:"Tolak"},{value:"terima",label:"Terima"}],required:!0,errors:e.status,addClass:"col-span-4"})});var _=t(9763),j=t(5369);let P=({showModal:a,setShowModal:e,dtEdit:t})=>{let[i,l]=(0,s.useState)(),[o,u]=(0,s.useState)(!1),{addData:c,updateData:p}=(0,d.Z)(),{register:x,handleSubmit:P,setValue:f,control:v,formState:{errors:w},watch:S}=(0,y.cI)(),k=()=>{f("id",""),f("terima_pinjam_id",""),f("bukti_bayar",""),l(null)};(0,s.useEffect)(()=>{t?(f("id",t.id),f("terima_pinjam_id",t.terima_pinjam_id),f("bukti_bayar",t.bukti_bayar),f("tgl_bayar",t.tgl_bayar),f("status_bayar",t.status_bayar),l(t.bukti_bayar)):k()},[a,t]);let Z=async a=>{console.log({row:a}),(0,j.Z)({row:a,dtEdit:t,setIsLoading:u,setShowModal:e,addData:c,updateData:p,resetForm:k,toastShow:h.Z})};return r.jsx(b.Z,{title:"Form Angsuran",showModal:a,setShowModal:e,children:(0,r.jsxs)("form",{onSubmit:P(Z),children:[r.jsx(m.Z,{name:"id",register:x,type:"hidden"}),r.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:r.jsx(g,{register:x,errors:w,dtEdit:t,control:v,watch:S,setValue:f,showModal:a,myFile:i,setMyFile:l})}),r.jsx("div",{children:o?r.jsx(n.Z,{}):r.jsx(_.Z,{onClick:P(Z),children:"Simpan"})})]})})};var f=t(2782),v=t(4669),w=t(3534),S=t(3158),k=t(7023);let Z=(0,S.Ue)((0,k.mW)((a,e)=>({dtPembayaran:[],setPembayaran:async({page:e=1,limit:t=10,search:r})=>{try{let s=await (0,o.hi)({method:"get",url:"/pembayaran",params:{limit:t,page:e,search:r}});return a(a=>({...a,dtPembayaran:s.data})),{status:"berhasil",data:s.data}}catch(a){return{status:"error",error:a.response.data}}},setPembayaranAll:async({search:e})=>{try{let t=await (0,o.hi)({method:"get",url:"/pembayaran/all",params:{search:e}});return a(a=>({...a,dtPembayaran:t.data})),{status:"berhasil",data:t.data}}catch(a){return{status:"error",error:a.response.data}}},setPembayaranStatus:async({page:e=1,limit:t=10,search:r,status:s="terima",anggota_id:n})=>{try{let i=await (0,o.hi)({method:"get",url:"/pembayaran/status",params:{limit:t,page:e,search:r,status:s,anggota_id:n}});return a(a=>({...a,dtPembayaran:i.data.data})),{status:"berhasil",data:i.data}}catch(a){return{status:"error",error:a.response.data}}}}))),A=({setModalRiwayat:a,modalRiwayat:e})=>{let{setPembayaranStatus:t,dtPembayaran:n}=Z(),[d,o]=(0,s.useState)(1),[p,m]=(0,s.useState)(10),h=(0,s.useCallback)(async a=>{await t({status:a})},[t]);(0,s.useEffect)(()=>{e&&h("lunas")},[h,e]);let[y,x]=(0,s.useState)(),[g,_]=(0,s.useState)(-1);return(0,s.useEffect)(()=>{x(u(n.data))},[n.data]),(0,r.jsxs)(b.Z,{setShowModal:a,showModal:e,title:"Riwayat Pembayaran",children:[r.jsx(c.Z,{index:g,setIndex:_,slides:y}),r.jsx(l.Z,{headTable:["No","Nama","Tgl. Angsuran","Status","Bukti Pembayaran"],tableBodies:["terima_pinjam.pinjaman.anggota.nm_anggota","tgl_bayar","status_bayar","bukti_bayar"],dataTable:n.data,page:d,limit:p,ubah:!1,hapus:!1,setIndexBox:_}),n?.last_page>1&&r.jsx("div",{className:"mt-4",children:r.jsx(i.Z,{currentPage:n?.current_page,totalPages:n?.last_page,setPage:o})})]})},q=()=>{let{removeData:a}=(0,d.Z)(),[e,t]=(0,s.useState)(!1),[n,i]=(0,s.useState)(!1),[l,o]=(0,s.useState)(),[u,c]=(0,s.useState)(),[m,b]=(0,s.useState)(""),[y,x]=(0,s.useState)(!1),[g,j]=(0,s.useState)(!1),S=async({id:e,isDelete:t})=>{if(o(e),t){let{data:e}=await a(l);(0,h.Z)({event:e}),i(!1)}else i(!0)};return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{children:[r.jsx(v.x7,{}),r.jsx(P,{dtEdit:u,showModal:e,setShowModal:t}),r.jsx(f.Z,{showDel:n,setShowDel:i,setDelete:S}),r.jsx(A,{setModalRiwayat:j,modalRiwayat:g}),(0,r.jsxs)("div",{className:"mb-4 flex justify-between",children:[r.jsx("p",{children:"Silahkan Mengolah data Pembayaran"}),y&&r.jsx("div",{children:r.jsx(_.Z,{onClick:()=>{t(!0),c(null)},children:"Tambah Data"})}),r.jsx(_.Z,{onClick:()=>j(!0),addClass:"bg-blue text-white",children:"Riwayat"})]}),r.jsx(w.Z,{placeholder:"Cari Data",onChange:a=>b(a)})]}),r.jsx(p,{setDelete:S,setEdit:a=>{t(!0),c(a)},search:m,setTambah:x})]})}},7160:(a,e,t)=>{"use strict";t.d(e,{Z:()=>l});var r=t(5344);t(3729);var s=t(615);t(5236);var n=t(2161),i=t(8290);t(4095),t(1065);let l=({index:a,setIndex:e,slides:t})=>r.jsx(s.ZP,{index:a,slides:t,open:a>=0,close:()=>e(-1),plugins:[n.Z,i.Z]})},3390:(a,e,t)=>{"use strict";t.d(e,{u:()=>s});var r=t(5344);t(3729);let s=({label:a,register:e,required:t,name:s,placeholder:n,defaultOption:i,options:l=[],errors:d,addClass:o})=>(0,r.jsxs)("div",{className:o,children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),t&&r.jsx("span",{className:"ml-1 text-red-600",children:"*"}),r.jsx("div",{className:"relative",children:(0,r.jsxs)("select",{className:"w-full rounded-lg py-2 px-2 bg-white border border-gray-300 focus:outline-none focus:border-secondary",id:a,placeholder:n,...e(s,{required:t}),children:[r.jsx("option",{value:"",children:i}),l.map((a,e)=>r.jsx("option",{value:a.value,children:a.label},e))]})}),d?.type==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[a," tidak boleh kosong"]})]})},4762:(a,e,t)=>{"use strict";t.d(e,{Z:()=>l});var r=t(3158),s=t(7023),n=t(87),i=t(5849);let l=(0,r.Ue)((0,s.mW)((a,e)=>({setFormData:a=>{let e=new FormData;return e.append("terima_pinjam_id",a.terima_pinjam_id),e.append("tgl_bayar",a.tgl_bayar),e.append("bukti_bayar",a.bukti_bayar),e.append("status_bayar",a.status_bayar),e.append("bukti_bayar",a.bukti_bayar),e},dtPembayaran:[],showPembayaran:[],setPembayaran:async({page:e=1,limit:t=10,search:r,sortby:s,order:l,anggota_id:d,status_pinjam:o="lunas",status_bayar:u})=>{try{let c=await i.Z.getState().setToken(),p=await (0,n.Sj)({method:"get",url:"/pembayaran",headers:{Authorization:`Bearer ${c}`},params:{limit:t,page:e,search:r,sortby:s,order:l,anggota_id:d,status_pinjam:o,status_bayar:u}});return a(a=>({...a,dtPembayaran:p.data.data})),{status:"berhasil",data:p.data}}catch(a){return{status:"error",error:a.response?.data}}},setShowPembayaran:async e=>{try{let t=await i.Z.getState().setToken(),r=await (0,n.Sj)({method:"get",url:`/pembayaran/${e}`,headers:{Authorization:`Bearer ${t}`}});return console.log({response:r}),a(a=>({...a,showPembayaran:r.data.data})),{status:"berhasil",data:r.data}}catch(a){return{status:"error",error:a.response?.data}}},addData:async t=>{let r=t?.bukti_bayar?e().setFormData(t):t;try{let e=await i.Z.getState().setToken(),t=await (0,n.Sj)({method:"post",url:"/pembayaran",headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"},data:r});return a(a=>({dtPembayaran:{last_page:a.dtPembayaran.last_page,current_page:a.dtPembayaran.current_page,data:[t.data.data,...a.dtPembayaran.data]}})),{status:"berhasil tambah",data:t.data}}catch(a){return{status:"error",data:a.response.data}}},removeData:async e=>{try{let t=await i.Z.getState().setToken(),r=await (0,n.Sj)({method:"delete",url:`/pembayaran/${e}`,headers:{Authorization:`Bearer ${t}`}});return a(a=>({dtPembayaran:{last_page:a.dtPembayaran.last_page,current_page:a.dtPembayaran.current_page,data:a.dtPembayaran.data.filter(a=>a.id!==e)}})),{status:"berhasil hapus",data:r.data}}catch(a){return{status:"error",data:a.response.data}}},updateData:async(t,r)=>{delete r.id;let s=r?.bukti_bayar?e().setFormData(r):r,l=await i.Z.getState().setToken(),d={"Content-Type":"multipart/form-data",Authorization:`Bearer ${l}`};try{let e=await (0,n.Sj)({url:`/pembayaran/${t}`,method:"post",headers:r?.bukti_bayar?d:{Authorization:`Bearer ${l}`},data:s,params:{_method:"PUT"}});return a(a=>({dtPembayaran:{last_page:a.dtPembayaran.last_page,current_page:a.dtPembayaran.current_page,data:a.dtPembayaran.data.map(a=>a.id===t?{...a,...e.data.data}:a)}})),{status:"berhasil update",data:e.data}}catch(a){return{status:"error",data:a.response.data}}}})))},7562:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>n,metadata:()=>s});var r=t(5036);t(2);let s={title:"Daftar Angsuran"},n=a=>r.jsx(r.Fragment,{children:a.children})},8453:(a,e,t)=>{"use strict";t.r(e),t.d(e,{$$typeof:()=>n,__esModule:()=>s,default:()=>i});let r=(0,t(6843).createProxy)(String.raw`/media/smarthagar/Assets/Project/NextJS/TA/bill/src/app/roles/bendahara/pembayaran/page.tsx`),{__esModule:s,$$typeof:n}=r,i=r.default}};var e=require("../../../../webpack-runtime.js");e.C(a);var t=a=>e(e.s=a),r=e.X(0,[638,356,337,434,94,708,852,82,882],()=>t(7712));module.exports=r})();