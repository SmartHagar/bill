(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{3045:function(e,t,r){Promise.resolve().then(r.bind(r,5114))},5114:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return U}});var n=r(7437),a=r(146),s=r(2265),i=e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("h2",{className:"text-center",children:"Billi"})}),o=r(7907),l=e=>{let[t,r]=(0,s.useState)(""),a=(0,o.usePathname)();return(0,s.useEffect)(()=>{if("/pegawai"===a)r("Selamat Datang di Halaman Pegawai");else{let e=null==a?void 0:a.split("/");r("Halaman ".concat(e[e.length-1]))}return()=>{}},[a]),(0,n.jsx)("h3",{className:"capitalize text-center text-xl font-bold",children:t})},c=r(1975);let u=e=>"/roles/admin".concat(e),d=e=>"/roles/anggota".concat(e),m=e=>"/roles/bendahara".concat(e),h=[{name:"Home",href:u(""),icon:(0,n.jsx)(c.u9h,{})},{name:"Anggota",href:u("/anggota"),icon:(0,n.jsx)(c.w7k,{})}],f=[{name:"Home",href:d(""),icon:(0,n.jsx)(c.u9h,{})},{name:"Pinjaman",href:d("/pinjaman"),icon:(0,n.jsx)(c.w7k,{})},{name:"Angsuran",href:d("/pembayaran"),icon:(0,n.jsx)(c.w7k,{})}],x=[{name:"Home",href:m(""),icon:(0,n.jsx)(c.u9h,{})},{name:"Simpanan",href:m("/simpanan"),icon:(0,n.jsx)(c.$iv,{})},{name:"Pinjaman",href:m("/pinjaman"),icon:(0,n.jsx)(c.oGQ,{})},{name:"Bukti Kirim",href:m("/bukti"),icon:(0,n.jsx)(c.oGQ,{})},{name:"Pembayaran",href:m("/pembayaran"),icon:(0,n.jsx)(c.oGQ,{})}];var p=r(8792),g=r(1262),v=r(2020),b=r(5249),j=r(2153);let w=(0,v.Ue)((0,b.mW)((e,t)=>({setToken:async()=>a.Z.get("token"),setLogout:async()=>{let e=await t().setToken();try{let t=await (0,j.I8)({method:"post",url:"/logout",headers:{Authorization:"Bearer ".concat(e)}});return{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}}}))),y=e=>{let{subMenus:t,name:r,icon:a,slug:s,index:i,pathname:o,openMenus:l}=e,c=l.includes(s);return(0,n.jsx)("div",{className:"cursor-pointer",children:(0,n.jsxs)("details",{className:"group [&_summary::-webkit-details-marker]:hidden",open:c,children:[(0,n.jsxs)("summary",{className:"flex items-center justify-between px-3 py-2 transition-colors duration-300 transform rounded-lg hover:bg-white hover:text-dark-blue }",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{children:a}),(0,n.jsx)("span",{className:"mx-2",children:r})]}),(0,n.jsx)("span",{className:"shrink-0 transition duration-300 group-open:-rotate-180",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),t&&t.map((e,t)=>{let r=o===e.href;return(0,n.jsxs)("div",{className:"ml-4",children:[!e.subMenus&&(0,n.jsx)(p.default,{href:e.href||"#",className:"flex items-center mx-3 py-2 transition-colors duration-300 transform rounded-lg hover:bg-white hover:text-dark-blue ".concat(r&&"text-green font-bold"),children:(0,n.jsx)("span",{className:"mx-2 text-sm font-medium",children:e.name})}),e.subMenus&&y({subMenus:e.subMenus,name:e.name,icon:e.icon,slug:e.slug,index:t,pathname:o,openMenus:l})]},t)})]})},i)};var k=r(3379);let N=async e=>{let{setLogout:t,setLoadLogout:r,route:n}=e;r(!0);let s=await t();if((null==s?void 0:s.status)==="success")return a.Z.remove("token"),a.Z.remove("role"),a.Z.remove("petugas"),n.push("/login")};var C=e=>{let{type:t="admin"}=e,[r,a]=(0,s.useState)(!1),i=(0,o.usePathname)(),l=(0,o.useRouter)(),[u,d]=(0,s.useState)([]),[m,v]=(0,s.useState)([]),[b,j]=(0,s.useState)(!1),{setLogout:C}=w();(0,s.useEffect)(()=>(a(!1),()=>{}),[i]),(0,s.useEffect)(()=>("admin"===t?d(h):"anggota"===t?d(f):"bendahara"===t&&d(x),()=>{}),[t]);let Z=()=>{a(!r)},R=e=>{for(let t of e){if((null==t?void 0:t.href)===i){let e=null==i?void 0:i.split("/");e.splice(0,1),v(e)}t.subMenus&&R(t.subMenus)}};return(0,s.useEffect)(()=>(u&&R(u),()=>{}),[u,i]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"absolute top-0",children:(0,n.jsxs)("button",{onClick:Z,type:"button",className:"inline-flex items-center p-2 mt-2 ms-3 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600",children:[(0,n.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,n.jsx)("svg",{className:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{clipRule:"evenodd",fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"})})]})}),(0,n.jsx)("aside",{className:"z-40 w-full h-screen transition-transform -translate-x-full sm:translate-x-0 ".concat(r?"translate-x-0":""),"aria-label":"Sidebar",children:(0,n.jsxs)("div",{className:"sidebar z-50 h-full px-3 pt-4 overflow-y-auto bg-primary/[0.5] text-color-2 flex flex-row-reverse justify-between sm:block",children:[(0,n.jsx)("div",{className:"text-black cursor-pointer sm:hidden",onClick:Z,children:(0,n.jsx)(c.C7Q,{})}),(0,n.jsxs)("div",{className:"relative h-full sidebar w-full",children:[(0,n.jsx)("div",{className:"h-24 sidebar"}),(0,n.jsx)("ul",{className:"space-y-2 w-full",children:u&&u.map((e,t)=>{let r=i===e.href,a=null==e?void 0:e.subMenus,{name:s,icon:o,slug:l}=e;return a?y({subMenus:a,name:s,icon:o,slug:l,index:t,pathname:i,openMenus:m}):(0,n.jsx)("li",{children:(0,n.jsxs)(p.default,{href:e.href||"#",className:"flex w-full items-center p-2 text-color-2 hover:bg-white hover:text-dark-blue transition-all duration-700 rounded-lg group ".concat(r&&"text-green font-bold"),children:[o,(0,n.jsx)("span",{className:"ms-3",children:s})]})},t)})}),b?(0,n.jsx)(k.Z,{}):(0,n.jsx)("div",{className:"absolute bottom-4 flex justify-center left-0 right-0",children:(0,n.jsx)(g.Z,{addClass:"bg-green text-dark-blue",onClick:()=>N({setLogout:C,setLoadLogout:j,route:l}),children:"Logout"})})]})]})})]})},Z=r(4782),R=e=>{let[t,r]=(0,s.useState)(!0),i=(0,o.usePathname)(),l=(0,o.useRouter)(),c=(null==i?void 0:i.split("/"))[2],{cekToken:u}=(0,Z.Z)(),d=async()=>{let e=await u();if(null==e?void 0:e.error)l.push("/auth/login");else{let e=a.Z.get("role");e!==c&&l.push("/roles/".concat(e))}return e};(0,s.useEffect)(()=>(d(),()=>{}),[i]);let m=async()=>{let e=await d();(null==e?void 0:e.error)||r(!1)};if((0,s.useEffect)(()=>(m(),console.log("pertama render"),()=>{}),[]),t)return(0,n.jsx)("div",{className:"flex min-h-screen h-screen justify-center items-center",children:(0,n.jsx)(k.Z,{})})},U=e=>{let{children:t}=e,r=a.Z.get("role");return(0,n.jsxs)("div",{className:"min-h-screen w-full flex bg-linear",children:[(0,n.jsx)(R,{}),(0,n.jsx)("div",{className:"fixed left-0 top-0 bottom-0 lg:w-52 text-white hidden lg:block",children:(0,n.jsx)(C,{type:r})}),(0,n.jsxs)("div",{className:"lg:ml-52 flex flex-col min-h-screen grow overflow-hidden",children:[(0,n.jsx)("div",{className:"text-white h-10 flex items-center justify-center",children:(0,n.jsx)(l,{})}),(0,n.jsx)("div",{className:"grow px-4 lg:mr-2 bg-white rounded-lg py-2",children:t}),(0,n.jsx)("div",{className:"min-h-12 text-white flex items-center justify-center",children:(0,n.jsx)(i,{})})]})]})}},1262:function(e,t,r){"use strict";var n=r(7437);r(2265),t.Z=e=>{let{children:t,onClick:r,addClass:a="bg-green hover:bg-green/80 text-dark-blue",type:s="button"}=e;return(0,n.jsx)("button",{type:s,className:"".concat(a," rounded-lg text-sm px-5 py-2.5 me-2 mb-2"),onClick:r,children:t})}},3379:function(e,t,r){"use strict";var n=r(7437);r(2265),t.Z=()=>(0,n.jsx)("div",{className:"w-12 h-12 rounded-full animate-spin border-y border-solid border-primary border-t-transparent shadow-md"})},2153:function(e,t,r){"use strict";r.d(t,{I8:function(){return s},Sj:function(){return i},_n:function(){return a},hi:function(){return o}});var n=r(7908);let a="http://127.0.0.1:8000",s=n.Z.create({baseURL:"".concat(a,"/auth")}),i=n.Z.create({baseURL:"".concat(a,"/crud")}),o=n.Z.create({baseURL:"".concat(a,"/api")});n.Z.create({baseURL:"".concat(a,"/storage")})},4782:function(e,t,r){"use strict";var n=r(2020),a=r(5249),s=r(2153),i=r(146);let o=(0,n.Ue)((0,a.mW)((e,t)=>({setToken:async()=>i.Z.get("token"),setLogin:async e=>{try{let t=await (0,s.I8)({method:"post",url:"/login",data:e});return{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},cekToken:async()=>{let e=await t().setToken();try{let t=await (0,s.I8)({method:"post",url:"/cek_token",headers:{Authorization:"Bearer ".concat(e)}});return{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}}})));t.Z=o},146:function(e,t,r){"use strict";/*! js-cookie v3.0.5 | MIT */function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{Z:function(){return a}});var a=function e(t,r){function a(e,a,s){if("undefined"!=typeof document){"number"==typeof(s=n({},r,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var o in s)s[o]&&(i+="; "+o,!0!==s[o]&&(i+="="+s[o].split(";")[0]));return document.cookie=e+"="+t.write(a,e)+i}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},a=0;a<r.length;a++){var s=r[a].split("="),i=s.slice(1).join("=");try{var o=decodeURIComponent(s[0]);if(n[o]=t.read(i,o),e===o)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){a(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[779,910,792,971,69,744],function(){return e(e.s=3045)}),_N_E=e.O()}]);