(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[396],{7582:function(a,t,e){Promise.resolve().then(e.bind(e,4230))},4230:function(a,t,e){"use strict";e.r(t),e.d(t,{default:function(){return T}});var r=e(7437),s=e(2265),l=e(3379),n=e(5676),d=e(8470),i=e(4901),u=e(2153),o=a=>null==a?void 0:a.map(a=>({src:"".concat(u._n,"/").concat(null==a?void 0:a.bukti_bayar),title:a.tgl_bayar,description:a.status_bayar,width:3840,height:5760})),c=e(9405),m=a=>{let{setDelete:t,setEdit:e,search:u,setTambah:m}=a,{setPembayaran:b,dtPembayaran:h}=(0,i.Z)(),[y,p]=(0,s.useState)(1),[g,_]=(0,s.useState)(10),[x,j]=(0,s.useState)(!0),v=(0,s.useCallback)(async()=>{j(!0),await b({page:y,limit:g,search:u,status_bayar:"proses,tolak,terima"}),j(!1)},[b,y,g,u]);(0,s.useEffect)(()=>{p(1),v()},[u,v]),(0,s.useEffect)(()=>(v(),()=>{}),[y,g,v]);let[f,w]=(0,s.useState)(),[S,P]=(0,s.useState)(-1);return(0,s.useEffect)(()=>{w(o(h.data))},[h.data]),(0,r.jsxs)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:[(0,r.jsx)(c.Z,{index:S,setIndex:P,slides:f}),x?(0,r.jsx)(l.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"",children:(0,r.jsx)(d.Z,{headTable:["No","Tgl. Angsuran","Status","Bukti Pembayaran"],tableBodies:["tgl_bayar","status_bayar","bukti_bayar"],dataTable:h.data,page:y,limit:g,setEdit:e,setDelete:t,ubah:!0,hapus:!1})}),(null==h?void 0:h.last_page)>1&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(n.Z,{currentPage:null==h?void 0:h.current_page,totalPages:null==h?void 0:h.last_page,setPage:p})})]})]})},b=e(8224),h=e(6628),y=e(8658),p=e(2670),g=e(6382);e(2413);var _=a=>{let{register:t,errors:e,control:s,dtEdit:l,watch:n,setValue:d,showModal:i,myFile:u,setMyFile:o}=a;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(g.u,{label:"Status_bayar",defaultOption:"Status Bayar",register:t,name:"status_bayar",options:[{value:"proses",label:"Proses"},{value:"tolak",label:"Tolak"},{value:"terima",label:"Terima"}],required:!0,errors:e.status,addClass:"col-span-4"})})},x=e(1262),j=e(1023),v=a=>{let{showModal:t,setShowModal:e,dtEdit:n}=a,[d,u]=(0,s.useState)(),[o,c]=(0,s.useState)(!1),{addData:m,updateData:g}=(0,i.Z)(),{register:v,handleSubmit:f,setValue:w,control:S,formState:{errors:P},watch:k}=(0,p.cI)(),Z=()=>{w("id",""),w("terima_pinjam_id",""),w("bukti_bayar",""),u(null)};(0,s.useEffect)(()=>{n?(w("id",n.id),w("terima_pinjam_id",n.terima_pinjam_id),w("bukti_bayar",n.bukti_bayar),w("tgl_bayar",n.tgl_bayar),w("status_bayar",n.status_bayar),u(n.bukti_bayar)):Z()},[t,n]);let N=async a=>{console.log({row:a}),(0,j.Z)({row:a,dtEdit:n,setIsLoading:c,setShowModal:e,addData:m,updateData:g,resetForm:Z,toastShow:y.Z})};return(0,r.jsx)(h.Z,{title:"Form Angsuran",showModal:t,setShowModal:e,children:(0,r.jsxs)("form",{onSubmit:f(N),children:[(0,r.jsx)(b.Z,{name:"id",register:v,type:"hidden"}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,r.jsx)(_,{register:v,errors:P,dtEdit:n,control:S,watch:k,setValue:w,showModal:t,myFile:d,setMyFile:u})}),(0,r.jsx)("div",{children:o?(0,r.jsx)(l.Z,{}):(0,r.jsx)(x.Z,{onClick:f(N),children:"Simpan"})})]})})},f=e(6533),w=e(8009),S=e(7500),P=e(2020),k=e(5249);let Z=(0,P.Ue)((0,k.mW)((a,t)=>({dtPembayaran:[],setPembayaran:async t=>{let{page:e=1,limit:r=10,search:s}=t;try{let t=await (0,u.hi)({method:"get",url:"/pembayaran",params:{limit:r,page:e,search:s}});return a(a=>({...a,dtPembayaran:t.data})),{status:"berhasil",data:t.data}}catch(a){return{status:"error",error:a.response.data}}},setPembayaranAll:async t=>{let{search:e}=t;try{let t=await (0,u.hi)({method:"get",url:"/pembayaran/all",params:{search:e}});return a(a=>({...a,dtPembayaran:t.data})),{status:"berhasil",data:t.data}}catch(a){return{status:"error",error:a.response.data}}},setPembayaranStatus:async t=>{let{page:e=1,limit:r=10,search:s,status:l="terima",anggota_id:n}=t;try{let t=await (0,u.hi)({method:"get",url:"/pembayaran/status",params:{limit:r,page:e,search:s,status:l,anggota_id:n}});return a(a=>({...a,dtPembayaran:t.data.data})),{status:"berhasil",data:t.data}}catch(a){return{status:"error",error:a.response.data}}}})));var N=a=>{let{setModalRiwayat:t,modalRiwayat:e}=a,{setPembayaranStatus:l,dtPembayaran:i}=Z(),[u,m]=(0,s.useState)(1),[b,y]=(0,s.useState)(10),p=(0,s.useCallback)(async a=>{await l({status:a})},[l]);(0,s.useEffect)(()=>{e&&p("lunas")},[p,e]);let[g,_]=(0,s.useState)(),[x,j]=(0,s.useState)(-1);return(0,s.useEffect)(()=>{_(o(i.data))},[i.data]),(0,r.jsxs)(h.Z,{setShowModal:t,showModal:e,title:"Riwayat Pembayaran",children:[(0,r.jsx)(c.Z,{index:x,setIndex:j,slides:g}),(0,r.jsx)(d.Z,{headTable:["No","Nama","Tgl. Angsuran","Status","Bukti Pembayaran"],tableBodies:["terima_pinjam.pinjaman.anggota.nm_anggota","tgl_bayar","status_bayar","bukti_bayar"],dataTable:i.data,page:u,limit:b,ubah:!1,hapus:!1,setIndexBox:j}),(null==i?void 0:i.last_page)>1&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(n.Z,{currentPage:null==i?void 0:i.current_page,totalPages:null==i?void 0:i.last_page,setPage:m})})]})},T=()=>{let{removeData:a}=(0,i.Z)(),[t,e]=(0,s.useState)(!1),[l,n]=(0,s.useState)(!1),[d,u]=(0,s.useState)(),[o,c]=(0,s.useState)(),[b,h]=(0,s.useState)(""),[p,g]=(0,s.useState)(!1),[_,j]=(0,s.useState)(!1),P=async t=>{let{id:e,isDelete:r}=t;if(u(e),r){let{data:t}=await a(d);(0,y.Z)({event:t}),n(!1)}else n(!0)};return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(w.x7,{}),(0,r.jsx)(v,{dtEdit:o,showModal:t,setShowModal:e}),(0,r.jsx)(f.Z,{showDel:l,setShowDel:n,setDelete:P}),(0,r.jsx)(N,{setModalRiwayat:j,modalRiwayat:_}),(0,r.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,r.jsx)("p",{children:"Silahkan Mengolah data Pembayaran"}),p&&(0,r.jsx)("div",{children:(0,r.jsx)(x.Z,{onClick:()=>{e(!0),c(null)},children:"Tambah Data"})}),(0,r.jsx)(x.Z,{onClick:()=>j(!0),addClass:"bg-blue text-white",children:"Riwayat"})]}),(0,r.jsx)(S.Z,{placeholder:"Cari Data",onChange:a=>h(a)})]}),(0,r.jsx)(m,{setDelete:P,setEdit:a=>{e(!0),c(a)},search:b,setTambah:g})]})}},9405:function(a,t,e){"use strict";var r=e(7437);e(2265);var s=e(4105);e(8032);var l=e(2460),n=e(4616);e(5014),e(6817),t.Z=a=>{let{index:t,setIndex:e,slides:d}=a;return(0,r.jsx)(s.ZP,{index:t,slides:d,open:t>=0,close:()=>e(-1),plugins:[l.Z,n.Z]})}},6382:function(a,t,e){"use strict";e.d(t,{u:function(){return s}});var r=e(7437);e(2265);let s=a=>{let{label:t,register:e,required:s,name:l,placeholder:n,defaultOption:d,options:i=[],errors:u,addClass:o}=a;return(0,r.jsxs)("div",{className:o,children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),s&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("select",{className:"w-full rounded-lg py-2 px-2 bg-white border border-gray-300 focus:outline-none focus:border-secondary",id:t,placeholder:n,...e(l,{required:s}),children:[(0,r.jsx)("option",{value:"",children:d}),i.map((a,t)=>(0,r.jsx)("option",{value:a.value,children:a.label},t))]})}),(null==u?void 0:u.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]})]})}},4901:function(a,t,e){"use strict";var r=e(2020),s=e(5249),l=e(2153),n=e(4782);let d=(0,r.Ue)((0,s.mW)((a,t)=>({setFormData:a=>{let t=new FormData;return t.append("terima_pinjam_id",a.terima_pinjam_id),t.append("tgl_bayar",a.tgl_bayar),t.append("bukti_bayar",a.bukti_bayar),t.append("status_bayar",a.status_bayar),t.append("bukti_bayar",a.bukti_bayar),t},dtPembayaran:[],showPembayaran:[],setPembayaran:async t=>{let{page:e=1,limit:r=10,search:s,sortby:d,order:i,anggota_id:u,status_pinjam:o="lunas",status_bayar:c}=t;try{let t=await n.Z.getState().setToken(),m=await (0,l.Sj)({method:"get",url:"/pembayaran",headers:{Authorization:"Bearer ".concat(t)},params:{limit:r,page:e,search:s,sortby:d,order:i,anggota_id:u,status_pinjam:o,status_bayar:c}});return a(a=>({...a,dtPembayaran:m.data.data})),{status:"berhasil",data:m.data}}catch(a){var m;return{status:"error",error:null===(m=a.response)||void 0===m?void 0:m.data}}},setShowPembayaran:async t=>{try{let e=await n.Z.getState().setToken(),r=await (0,l.Sj)({method:"get",url:"/pembayaran/".concat(t),headers:{Authorization:"Bearer ".concat(e)}});return console.log({response:r}),a(a=>({...a,showPembayaran:r.data.data})),{status:"berhasil",data:r.data}}catch(a){var e;return{status:"error",error:null===(e=a.response)||void 0===e?void 0:e.data}}},addData:async e=>{let r=(null==e?void 0:e.bukti_bayar)?t().setFormData(e):e;try{let t=await n.Z.getState().setToken(),e=await (0,l.Sj)({method:"post",url:"/pembayaran",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"multipart/form-data"},data:r});return a(a=>({dtPembayaran:{last_page:a.dtPembayaran.last_page,current_page:a.dtPembayaran.current_page,data:[e.data.data,...a.dtPembayaran.data]}})),{status:"berhasil tambah",data:e.data}}catch(a){return{status:"error",data:a.response.data}}},removeData:async t=>{try{let e=await n.Z.getState().setToken(),r=await (0,l.Sj)({method:"delete",url:"/pembayaran/".concat(t),headers:{Authorization:"Bearer ".concat(e)}});return a(a=>({dtPembayaran:{last_page:a.dtPembayaran.last_page,current_page:a.dtPembayaran.current_page,data:a.dtPembayaran.data.filter(a=>a.id!==t)}})),{status:"berhasil hapus",data:r.data}}catch(a){return{status:"error",data:a.response.data}}},updateData:async(e,r)=>{delete r.id;let s=(null==r?void 0:r.bukti_bayar)?t().setFormData(r):r,d=await n.Z.getState().setToken();try{let t=await (0,l.Sj)({url:"/pembayaran/".concat(e),method:"post",headers:(null==r?void 0:r.bukti_bayar)?{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(d)}:{Authorization:"Bearer ".concat(d)},data:s,params:{_method:"PUT"}});return a(a=>({dtPembayaran:{last_page:a.dtPembayaran.last_page,current_page:a.dtPembayaran.current_page,data:a.dtPembayaran.data.map(a=>a.id===e?{...a,...t.data.data}:a)}})),{status:"berhasil update",data:t.data}}catch(a){return{status:"error",data:a.response.data}}}})));t.Z=d}},function(a){a.O(0,[779,990,910,656,703,680,675,973,971,69,744],function(){return a(a.s=7582)}),_N_E=a.O()}]);