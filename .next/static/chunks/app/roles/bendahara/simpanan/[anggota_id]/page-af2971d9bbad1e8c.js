(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[887],{7105:function(a,e,t){Promise.resolve().then(t.bind(t,9716))},9716:function(a,e,t){"use strict";t.r(e),t.d(e,{default:function(){return Y}});var n=t(7437),s=t(2265),r=t(3379),l=t(5676),i=t(8470),d=t(2020),o=t(5249),c=t(2153),u=t(4782);let m=(0,d.Ue)((0,o.mW)((a,e)=>({dtSimpanan:{last_page:0,current_page:0,data:[]},setSimpanan:async e=>{let{page:t=1,limit:n=10,search:s,sortby:r,order:l,anggota_id:i}=e;try{let e=await u.Z.getState().setToken(),d=await (0,c.Sj)({method:"get",url:"/simpanan",headers:{Authorization:"Bearer ".concat(e)},params:{limit:n,page:t,search:s,sortby:r,order:l,anggota_id:i}});return a(a=>({...a,dtSimpanan:d.data.data})),{status:"berhasil",data:d.data}}catch(a){var d;return{status:"error",error:null===(d=a.response)||void 0===d?void 0:d.data}}},setShowSimpanan:async e=>{try{let t=await u.Z.getState().setToken(),n=await (0,c.Sj)({method:"get",url:"/simpanan/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return a(a=>({...a,dtSimpanan:n.data.data})),{status:"berhasil",data:n.data}}catch(a){var t;return{status:"error",error:null===(t=a.response)||void 0===t?void 0:t.data}}},addData:async e=>{try{let t=await u.Z.getState().setToken(),n=await (0,c.Sj)({method:"post",url:"/simpanan",headers:{Authorization:"Bearer ".concat(t)},data:e});return a(a=>({dtSimpanan:{last_page:a.dtSimpanan.last_page,current_page:a.dtSimpanan.current_page,data:[n.data.data,...a.dtSimpanan.data]}})),{status:"berhasil tambah",data:n.data}}catch(a){return{status:"error",data:a.response.data}}},removeData:async e=>{try{let t=await u.Z.getState().setToken(),n=await (0,c.Sj)({method:"delete",url:"/simpanan/".concat(e),headers:{Authorization:"Bearer ".concat(t)}});return a(a=>({dtSimpanan:{last_page:a.dtSimpanan.last_page,current_page:a.dtSimpanan.current_page,data:a.dtSimpanan.data.filter(a=>a.id!==e)}})),{status:"berhasil hapus",data:n.data}}catch(a){return{status:"error",data:a.response.data}}},updateData:async(e,t)=>{try{let n=await u.Z.getState().setToken(),s=await (0,c.Sj)({method:"PUT",url:"/simpanan/".concat(e),headers:{Authorization:"Bearer ".concat(n)},data:t});return a(a=>({dtSimpanan:{last_page:a.dtSimpanan.last_page,current_page:a.dtSimpanan.current_page,data:a.dtSimpanan.data.map(a=>a.id===e?{...a,...s.data.data}:a)}})),{status:"berhasil update",data:s.data}}catch(a){return{status:"error",data:a.response.data}}}})));var p=a=>{let{setDelete:e,setEdit:t,search:d,anggota_id:o}=a,{setSimpanan:c,dtSimpanan:u}=m(),[p,h]=(0,s.useState)(1),[g,x]=(0,s.useState)(10),[j,S]=(0,s.useState)(!0),f=async()=>{await c({page:p,limit:g,search:d,anggota_id:o}),S(!1)};return(0,s.useEffect)(()=>(f(),()=>{}),[p,g]),(0,s.useEffect)(()=>{h(1),f()},[d]),(0,n.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:j?(0,n.jsx)(r.Z,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"",children:(0,n.jsx)(i.Z,{headTable:["No","Tgl. Simpan","Nominal","Ket","Aksi"],tableBodies:["tgl_simpanan","nominal","ket"],dataTable:u.data,page:p,limit:g,setEdit:t,setDelete:e,ubah:!0,hapus:!0})}),(null==u?void 0:u.last_page)>1&&(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(l.Z,{currentPage:null==u?void 0:u.current_page,totalPages:null==u?void 0:u.last_page,setPage:h})})]})})},h=t(8224),g=t(6628),x=t(8658),j=t(2670),S=t(3441),f=t.n(S),_=t(2151),v=t.n(_),w=a=>{let{control:e,required:t,name:s,errors:r,addClass:l,label:i,startDate:d,setStartDate:o}=a;return(0,n.jsxs)("div",{className:l,children:[(0,n.jsxs)("label",{className:"text-sm font-medium text-gray-700 tracking-wide block",children:[i,t&&(0,n.jsx)("span",{className:"ml-1 text-red-600",children:"*"})]}),(0,n.jsx)(j.Qr,{name:s,control:e,rules:{required:t},render:a=>{let{field:e}=a;return(0,n.jsx)(f(),{selected:d,onChange:a=>{if(a){o(a);let t=v()(a).format("YYYY-MM-DD");e.onChange(t)}else o(null),e.onChange("")},dateFormat:"dd/MM/yyyy",value:d||"",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"w-full border rounded-lg py-2 px-4"})}}),(null==r?void 0:r.type)==="required"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[i," tidak boleh kosong"]})]})},b=t(2411);t(2413);var y=a=>{let{register:e,errors:t,control:s,dtEdit:r,watch:l,setValue:i,showModal:d,tgl_simpanan:o,setTgl_simpanan:c}=a;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w,{label:"Tgl. Simpan",name:"tgl_simpanan",control:s,startDate:o,setStartDate:c,required:!0,errors:t.tgl_simpanan,addClass:"col-span-4 lg:col-span-2"}),(0,n.jsx)(b.Z,{label:"Nominal",name:"nominal",control:s,required:!0,errors:t.nominal,addClass:"col-span-4 lg:col-span-2"}),(0,n.jsx)(h.Z,{label:"Keterangan",name:"ket_simpanan",register:e,addClass:"col-span-4"})]})},k=t(1262),N=t(1023),Z=a=>{let{showModal:e,setShowModal:t,dtEdit:l,anggota_id:i}=a,d=v()(),[o,c]=(0,s.useState)(!1),[u,p]=(0,s.useState)(""),{addData:S,updateData:f}=m(),{register:_,handleSubmit:w,setValue:b,control:Z,formState:{errors:D},watch:M}=(0,j.cI)(),C=()=>{b("id",""),b("anggota_id",i),b("tgl_simpanan",d.format("YYYY-MM-DD")),p(d.format("MM/DD/YYYY")),b("nominal",0)};(0,s.useEffect)(()=>{l?(b("id",l.id),b("anggota_id",l.anggota_id),b("tgl_simpanan",l.tgl_simpanan),p(l.tgl_simpanan),b("nominal",l.nominal)):C()},[e,l]);let Y=async a=>{a.anggota_id=i,console.log({row:a}),(0,N.Z)({row:a,dtEdit:l,setIsLoading:c,setShowModal:t,addData:S,updateData:f,resetForm:C,toastShow:x.Z})};return(0,n.jsx)(g.Z,{title:"Form Pinjaman",showModal:e,setShowModal:t,children:(0,n.jsxs)("form",{onSubmit:w(Y),children:[(0,n.jsx)(h.Z,{name:"id",register:_,type:"hidden"}),(0,n.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,n.jsx)(y,{register:_,errors:D,dtEdit:l,control:Z,watch:M,setValue:b,showModal:e,tgl_simpanan:u,setTgl_simpanan:p})}),(0,n.jsx)("div",{children:o?(0,n.jsx)(r.Z,{}):(0,n.jsx)(k.Z,{onClick:w(Y),children:"Simpan"})})]})})},D=t(6533),M=t(8009),C=t(7500),Y=a=>{let{params:e}=a,t=parseInt(e.anggota_id),{removeData:r}=m(),[l,i]=(0,s.useState)(!1),[d,o]=(0,s.useState)(!1),[c,u]=(0,s.useState)(),[h,g]=(0,s.useState)(),[j,S]=(0,s.useState)(""),f=async a=>{let{id:e,isDelete:t}=a;if(u(e),t){let{data:a}=await r(c);(0,x.Z)({event:a}),o(!1)}else o(!0)};return(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(M.x7,{}),(0,n.jsx)(Z,{dtEdit:h,showModal:l,setShowModal:i,anggota_id:t}),(0,n.jsx)(D.Z,{showDel:d,setShowDel:o,setDelete:f}),(0,n.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,n.jsx)("p",{children:"Silahkan Mengolah data Simpanan"}),(0,n.jsx)("div",{children:(0,n.jsx)(k.Z,{onClick:()=>{i(!0),g(null)},children:"Tambah Data"})})]}),(0,n.jsx)(C.Z,{placeholder:"Cari Data",onChange:a=>S(a)})]}),(0,n.jsx)(p,{setDelete:f,setEdit:a=>{i(!0),g(a)},search:j,anggota_id:t})]})}},2411:function(a,e,t){"use strict";var n=t(7437);t(2265);var s=t(2670),r=t(3975);e.Z=a=>{let{label:e,required:t,name:l,minLength:i,maxLength:d,errors:o,control:c,addClass:u,readOnly:m}=a;return(0,n.jsxs)("div",{className:u,children:[(0,n.jsx)("label",{htmlFor:l,className:"text-sm font-medium text-gray-700 tracking-wide",children:e}),t&&(0,n.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)(s.Qr,{name:l,control:c,rules:{required:t},render:a=>{let{field:e}=a;return(0,n.jsx)(r.h3,{id:l,type:"text",autoComplete:"off",thousandSeparator:",",prefix:"Rp. ",value:e.value,onValueChange:(a,t)=>{e.onChange(a.floatValue||"")},className:"w-full text-gray-700 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-secondary",readOnly:m})}})}),(null==o?void 0:o.type)==="required"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," tidak boleh kosong"]}),(null==o?void 0:o.type)==="minLength"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," tidak boleh kurang dari ",i," karakter"]}),(null==o?void 0:o.type)==="maxLength"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," tidak boleh lebih dari ",d," karakter"]}),(null==o?void 0:o.type)==="pattern"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[e," hanya boleh angka."]})]})}}},function(a){a.O(0,[779,990,910,656,703,680,975,426,441,973,971,69,744],function(){return a(a.s=7105)}),_N_E=a.O()}]);