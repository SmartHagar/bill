(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[819],{5183:function(a,t,e){Promise.resolve().then(e.bind(e,1732))},1732:function(a,t,e){"use strict";e.r(t),e.d(t,{default:function(){return Z}});var n=e(7437),s=e(2265),r=e(3379),l=e(5676),i=e(8470),d=e(572),o=a=>{let{setDelete:t,setEdit:e,search:o,anggota_id:u,setTambah:c}=a,{setPinjaman:m,dtPinjaman:h}=(0,d.Z)(),[g,j]=(0,s.useState)(1),[p,x]=(0,s.useState)(10),[f,v]=(0,s.useState)(!0),_=(0,s.useCallback)(async()=>{u&&(v(!0),await m({page:g,limit:p,search:o,anggota_id:u}),v(!1))},[m,g,p,o,u]);return(0,s.useEffect)(()=>{j(1),_()},[o,_]),(0,s.useEffect)(()=>(_(),()=>{}),[g,p,_]),(0,s.useEffect)(()=>{let a=null==h?void 0:h.data;return(null==a?void 0:a.find(a=>"proses"===a.status))?c(!1):c(!0),()=>{}},[h,c]),(0,n.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:f?(0,n.jsx)(r.Z,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"",children:(0,n.jsx)(i.Z,{headTable:["No","Tgl. Pinjam","Nominal","Lama (Bulan)","Angsuran","Status"],tableBodies:["tgl_pinjam","nominal","lama_pinjam","angsuran","status"],dataTable:h.data,page:g,limit:p,setEdit:e,setDelete:t,ubah:!1,hapus:!1})}),(null==h?void 0:h.last_page)>1&&(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(l.Z,{currentPage:null==h?void 0:h.current_page,totalPages:null==h?void 0:h.last_page,setPage:j})})]})})},u=e(8224),c=e(6628),m=e(8658),h=e(2670),g=e(2411);e(2413);var j=a=>{let{register:t,errors:e,control:r,dtEdit:l,watch:i,setValue:d,showModal:o}=a,c=i("nominal",0),m=i("lama_pinjam",0);return(0,s.useEffect)(()=>{d("angsuran",Math.ceil(c/m||0))},[c,m,d]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.Z,{label:"Nominal",name:"nominal",control:r,required:!0,errors:e.nominal,addClass:"col-span-4 lg:col-span-2"}),(0,n.jsxs)("div",{className:"lg:col-span-1 flex items-center gap-2",children:[(0,n.jsx)(u.Z,{label:"Lama",name:"lama_pinjam",register:t,required:!0,errors:e.lama_pinjam,valueAsNumber:!0,min:0,max:12,type:"number",addClass:"col-span-4"}),(0,n.jsx)("span",{className:"mt-5 text-xs",children:"Bulan"})]}),(0,n.jsx)(g.Z,{label:"Angsuran",name:"angsuran",control:r,required:!0,errors:e.angsuran,readOnly:!0,addClass:"col-span-4"})]})},p=e(1262),x=e(1023),f=e(2151),v=e.n(f),_=a=>{let{showModal:t,setShowModal:e,dtEdit:l,anggota_id:i}=a,o=v()(),[g,f]=(0,s.useState)(!1),[_,b]=(0,s.useState)(""),{addData:S,updateData:w}=(0,d.Z)(),{register:y,handleSubmit:Z,setValue:N,control:P,formState:{errors:k},watch:D}=(0,h.cI)(),C=()=>{N("id",""),N("anggota_id",i),N("tgl_pinjam",o.format("YYYY-MM-DD")),b(o.format("MM/DD/YYYY")),N("nominal",0),N("angsuran",0),N("status","proses")};(0,s.useEffect)(()=>{l?(N("id",l.id),N("anggota_id",l.anggota_id),N("tgl_pinjam",l.tgl_pinjam),b(l.tgl_pinjam),N("nominal",l.nominal),N("angsuran",l.angsuran),N("status",l.status)):C()},[t,l]);let E=async a=>{a.anggota_id=i,console.log({row:a}),(0,x.Z)({row:a,dtEdit:l,setIsLoading:f,setShowModal:e,addData:S,updateData:w,resetForm:C,toastShow:m.Z})};return(0,n.jsx)(c.Z,{title:"Form Pinjaman",showModal:t,setShowModal:e,children:(0,n.jsxs)("form",{onSubmit:Z(E),children:[(0,n.jsx)(u.Z,{name:"id",register:y,type:"hidden"}),(0,n.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,n.jsx)(j,{register:y,errors:k,dtEdit:l,control:P,watch:D,setValue:N,showModal:t})}),(0,n.jsx)("div",{children:g?(0,n.jsx)(r.Z,{}):(0,n.jsx)(p.Z,{onClick:Z(E),children:"Simpan"})})]})})},b=e(6533),S=e(8009),w=e(7500),y=e(146),Z=()=>{let{removeData:a}=(0,d.Z)(),[t,e]=(0,s.useState)(!1),[r,l]=(0,s.useState)(!1),[i,u]=(0,s.useState)(),[c,h]=(0,s.useState)(),[g,j]=(0,s.useState)(""),[x,f]=(0,s.useState)(!1),[v,Z]=(0,s.useState)({}),N=y.Z.get("anggota");(0,s.useEffect)(()=>{N&&Z(JSON.parse(N))},[N]);let P=async t=>{let{id:e,isDelete:n}=t;if(u(e),n){let{data:t}=await a(i);(0,m.Z)({event:t}),l(!1)}else l(!0)};return(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(S.x7,{}),(0,n.jsx)(_,{dtEdit:c,showModal:t,setShowModal:e,anggota_id:v.id}),(0,n.jsx)(b.Z,{showDel:r,setShowDel:l,setDelete:P}),(0,n.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,n.jsx)("p",{children:"Silahkan Mengolah data Pinjaman"}),x&&(0,n.jsx)("div",{children:(0,n.jsx)(p.Z,{onClick:()=>{e(!0),h(null)},children:"Tambah Data"})})]}),(0,n.jsx)(w.Z,{placeholder:"Cari Data",onChange:a=>j(a)})]}),(0,n.jsx)(o,{setDelete:P,setEdit:a=>{e(!0),h(a)},search:g,anggota_id:v.id,setTambah:f})]})}},2411:function(a,t,e){"use strict";var n=e(7437);e(2265);var s=e(2670),r=e(3975);t.Z=a=>{let{label:t,required:e,name:l,minLength:i,maxLength:d,errors:o,control:u,addClass:c,readOnly:m}=a;return(0,n.jsxs)("div",{className:c,children:[(0,n.jsx)("label",{htmlFor:l,className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),e&&(0,n.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)(s.Qr,{name:l,control:u,rules:{required:e},render:a=>{let{field:t}=a;return(0,n.jsx)(r.h3,{id:l,type:"text",autoComplete:"off",thousandSeparator:",",prefix:"Rp. ",value:t.value,onValueChange:(a,e)=>{t.onChange(a.floatValue||"")},className:"w-full text-gray-700 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-secondary",readOnly:m})}})}),(null==o?void 0:o.type)==="required"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==o?void 0:o.type)==="minLength"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",i," karakter"]}),(null==o?void 0:o.type)==="maxLength"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",d," karakter"]}),(null==o?void 0:o.type)==="pattern"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]})]})}},572:function(a,t,e){"use strict";var n=e(2020),s=e(5249),r=e(2153),l=e(4782);let i=(0,n.Ue)((0,s.mW)((a,t)=>({dtPinjaman:{last_page:0,current_page:0,data:[]},setPinjaman:async t=>{let{page:e=1,limit:n=10,search:s,sortby:i,order:d,anggota_id:o}=t;try{let t=await l.Z.getState().setToken(),u=await (0,r.Sj)({method:"get",url:"/pinjaman",headers:{Authorization:"Bearer ".concat(t)},params:{limit:n,page:e,search:s,sortby:i,order:d,anggota_id:o}});return a(a=>({...a,dtPinjaman:u.data.data})),{status:"berhasil",data:u.data}}catch(a){var u;return{status:"error",error:null===(u=a.response)||void 0===u?void 0:u.data}}},setShowPinjaman:async t=>{try{let e=await l.Z.getState().setToken(),n=await (0,r.Sj)({method:"get",url:"/pinjaman/".concat(t),headers:{Authorization:"Bearer ".concat(e)}});return a(a=>({...a,dtPinjaman:n.data.data})),{status:"berhasil",data:n.data}}catch(a){var e;return{status:"error",error:null===(e=a.response)||void 0===e?void 0:e.data}}},addData:async t=>{try{let e=await l.Z.getState().setToken(),n=await (0,r.Sj)({method:"post",url:"/pinjaman",headers:{Authorization:"Bearer ".concat(e)},data:t});return a(a=>({dtPinjaman:{last_page:a.dtPinjaman.last_page,current_page:a.dtPinjaman.current_page,data:[n.data.data,...a.dtPinjaman.data]}})),{status:"berhasil tambah",data:n.data}}catch(a){return{status:"error",data:a.response.data}}},removeData:async t=>{try{let e=await l.Z.getState().setToken(),n=await (0,r.Sj)({method:"delete",url:"/pinjaman/".concat(t),headers:{Authorization:"Bearer ".concat(e)}});return a(a=>({dtPinjaman:{last_page:a.dtPinjaman.last_page,current_page:a.dtPinjaman.current_page,data:a.dtPinjaman.data.filter(a=>a.id!==t)}})),{status:"berhasil hapus",data:n.data}}catch(a){return{status:"error",data:a.response.data}}},updateData:async(t,e)=>{try{let n=await l.Z.getState().setToken(),s=await (0,r.Sj)({method:"PUT",url:"/pinjaman/".concat(t),headers:{Authorization:"Bearer ".concat(n)},data:e});return a(a=>({dtPinjaman:{last_page:a.dtPinjaman.last_page,current_page:a.dtPinjaman.current_page,data:a.dtPinjaman.data.map(a=>a.id===t?{...a,...s.data.data}:a)}})),{status:"berhasil update",data:s.data}}catch(a){return{status:"error",data:a.response.data}}}})));t.Z=i}},function(a){a.O(0,[779,990,910,656,703,680,975,973,971,69,744],function(){return a(a.s=5183)}),_N_E=a.O()}]);